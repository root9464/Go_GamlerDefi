# GraphQL генерация кода

## Описание

Этот проект использует [gqlgen](https://github.com/99designs/gqlgen) для генерации GraphQL кода. 
Структура проекта разделена на модули, каждый из которых имеет свою схему GraphQL.

## Структура проекта

```
modules/
  ├── module1/
  │   ├── gql/
  │   │   └── schema.gql    # Схема GraphQL для модуля 1
  │   └── model/            # Здесь будут сгенерированы модели
  ├── module2/
  │   ├── gql/
  │   │   └── schema.gql    # Схема GraphQL для модуля 2
  │   └── model/            # Здесь будут сгенерированы модели
  └── graphql/              # Общие сгенерированные файлы GraphQL
      └── generated.go      # Основной сгенерированный файл
```

## Использование

### Генерация кода для конкретных модулей

Запустите скрипт генерации, указав имена модулей, для которых нужно генерировать код:

```bash
go run scripts/generate.go module1 module2 ...
```

Пример:

```bash
go run scripts/generate.go test auth user
```

### Добавление нового модуля

1. Создайте директорию для нового модуля:

```bash
mkdir -p modules/new_module/gql
mkdir -p modules/new_module/model
```

2. Создайте схему GraphQL в `modules/new_module/gql/schema.gql`

3. Запустите генерацию для нового модуля:

```bash
go run scripts/generate.go new_module
```

## Процесс генерации

Скрипт генерации автоматически:
1. Создает временную копию конфигурации gqlgen.yml для каждого модуля
2. Заменяет плейсхолдер {module} на имя модуля
3. Запускает gqlgen с этой временной конфигурацией
4. Удаляет временную конфигурацию

Это позволяет генерировать код для новых модулей без перезаписи уже сгенерированного кода. 